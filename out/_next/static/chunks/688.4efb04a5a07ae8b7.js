"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{15688:(e,a,s)=>{s.r(a),s.d(a,{SteppedPaymentFlowCalculator:()=>ep});var t=s(71983),l=s(45849),n=s(95155),r=s(12115),o=s(22544),i=s(66942),c=s(66136),d=s(36596),m=s(3998),u=s(86948),p=s(41052),x=s(65142),h=s(76444),j=s(86259),g=s(51834),v=s(71871),b=s(80647),f=s(61362),y=s(91761),N=s(39867),C=s(89715),w=s(23327),I=s(97239),P=s(35299),S=s(74474),V=s(46826),A=s(89652),M=s(76907),k=s(95740),F=s(1524),E=s(21786),R=s(91169),T=s(78874),D=s(32078),B=s(41962),O=s(58341),U=s(70213),q=s(19456),z=s(76501),W=s(19056),L=s(90231),J=s(66832),Z=s(87270),_=s(15894),$=s(24620),G=s(18332),H=s(92579),Y=s(63004),X=s(3128),Q=s(71552),K=s(42943),ee=s(20243),ea=s(67909),es=s(58885),et=s(24580),el=s(73254);let en=(0,ea.default)(()=>Promise.all([s.e(707),s.e(611),s.e(96),s.e(76)]).then(s.bind(s,17189)).then(e=>e.UnitSelectorDialogContent),{loadableGenerated:{webpack:()=>[17189]},loading:()=>(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)(ee.E,{className:"h-64 w-full"})}),ssr:!1}),er=(0,ea.default)(()=>Promise.all([s.e(707),s.e(76)]).then(s.bind(s,5958)).then(e=>e.InteractiveTutorial),{loadableGenerated:{webpack:()=>[5958]},ssr:!1}),eo=new Map,ei=c.Ik({type:c.k5(["sinalAto","sinal1","sinal2","sinal3","proSoluto","bonusAdimplencia","desconto","bonusCampanha","fgts","financiamento"]),value:c.au.number().min(0,{message:"O valor deve ser positivo."}),date:c.p6({required_error:"A data \xe9 obrigat\xf3ria."})}),ec=c.Ik({propertyId:c.Yj().min(1,{message:"Selecione um im\xf3vel."}),selectedUnit:c.Yj().optional(),appraisalValue:c.au.number().positive({message:"O valor de avalia\xe7\xe3o \xe9 obrigat\xf3rio."}),saleValue:c.au.number().positive({message:"O valor de venda \xe9 obrigat\xf3rio."}),grossIncome:c.au.number().positive({message:"A renda bruta \xe9 obrigat\xf3ria."}),simulationInstallmentValue:c.au.number().positive({message:"O valor da parcela \xe9 obrigat\xf3rio."}),financingParticipants:c.au.number().int().min(1,"Selecione o n\xfamero de participantes.").max(4),payments:c.YO(ei),conditionType:c.k5(["padrao","especial"]),installments:c.au.number().int().min(1,{message:"M\xednimo de 1 parcela."}).optional(),notaryFees:c.au.number().optional(),notaryPaymentMethod:c.k5(["creditCard","bankSlip"]),notaryInstallments:c.au.number().int().optional()}).refine(e=>"creditCard"!==e.notaryPaymentMethod||!e.notaryInstallments||e.notaryInstallments>=1&&e.notaryInstallments<=12,{message:"Para cart\xe3o de cr\xe9dito, o parcelamento \xe9 de 1 a 12 vezes.",path:["notaryInstallments"]}).refine(e=>"bankSlip"!==e.notaryPaymentMethod||!e.notaryInstallments||[36,40].includes(e.notaryInstallments),{message:"Para boleto, o parcelamento \xe9 de 36 ou 40 vezes.",path:["notaryInstallments"]}),ed=[{value:"sinalAto",label:"Sinal Ato"},{value:"sinal1",label:"Sinal 1"},{value:"sinal2",label:"Sinal 2"},{value:"sinal3",label:"Sinal 3"},{value:"proSoluto",label:"Pr\xf3-Soluto"},{value:"bonusAdimplencia",label:"B\xf4nus Adimpl\xeancia"},{value:"desconto",label:"Desconto"},{value:"bonusCampanha",label:"B\xf4nus de Campanha"},{value:"fgts",label:"FGTS"},{value:"financiamento",label:"Financiamento"}],em=(e,a,s,t,l)=>{let n,r=Math.max(a,s),o=e.reduce((e,a)=>e+a.value,0),i=Math.abs(o-r),c=e.find(e=>"bonusCampanha"===e.type),d=e.find(e=>"sinalAto"===e.type);return c&&d&&t&&d.value<=.05*s&&(n="B\xf4nus de campanha n\xe3o pode existir quando o sinal ato \xe9 igual ou inferior ao m\xednimo (5%)."),{isValid:i<.01,difference:i,expected:r,actual:o,businessLogicViolation:n}},eu=(0,r.memo)(e=>{let{name:a,label:s,control:t,readOnly:l=!1,placeholder:r="R$ 0,00",id:o}=e;return(0,n.jsx)(p.zB,{control:t,name:a,render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{id:o,children:[(0,n.jsx)(p.lR,{children:s}),(0,n.jsx)(p.MJ,{children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(y.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,n.jsx)(Y.U,{value:100*a.value,onValueChange:e=>a.onChange(null===e?0:e/100),className:"pl-10",readOnly:l,placeholder:r})]})}),(0,n.jsx)(p.C5,{})]})}})});function ep(e){let{properties:a,isSinalCampaignActive:s,sinalCampaignLimitPercent:c,isTutorialOpen:ee,setIsTutorialOpen:ea}=e,[ei,ep]=(0,r.useState)(null),[ex,eh]=(0,r.useState)(!1),ej=(0,r.useRef)(null),eg=(0,r.useRef)(null),{toast:ev}=(0,_.dj)(),[eb,ef]=(0,r.useState)(!1),[ey,eN]=(0,r.useState)(!1),[eC,ew]=(0,r.useState)([]),[eI,eP]=(0,r.useState)("Dispon\xedvel"),[eS,eV]=(0,r.useState)("Todos"),[eA,eM]=(0,r.useState)("Todos"),[ek,eF]=(0,r.useState)("Todos"),[eE,eR]=(0,r.useState)(!1),[eT,eD]=(0,r.useState)(""),[eB,eO]=(0,r.useState)(""),eU=(0,r.useRef)({isProcessing:!1,lastOperation:"",timestamp:0}),eq=(0,o.mN)({resolver:(0,i.u)(ec),defaultValues:{propertyId:"",selectedUnit:"",payments:[],appraisalValue:0,saleValue:0,grossIncome:0,simulationInstallmentValue:0,financingParticipants:1,conditionType:"padrao",installments:void 0,notaryFees:void 0,notaryPaymentMethod:"creditCard",notaryInstallments:void 0}}),{fields:ez,append:eW,remove:eL,replace:eJ}=(0,o.jz)({control:eq.control,name:"payments"}),eZ=eq.watch("payments"),e_=eq.watch("appraisalValue"),e$=eq.watch("saleValue"),eG=eq.watch("propertyId"),eH=eq.watch("financingParticipants"),eY=eq.watch("notaryPaymentMethod"),{setValue:eX,setError:eQ,getValues:eK,clearErrors:e0}=eq,e1=(0,r.useMemo)(()=>eZ.some(e=>"sinal1"===e.type),[eZ]),e4=(0,r.useMemo)(()=>eZ.some(e=>"sinal2"===e.type),[eZ]),e2=(0,r.useMemo)(()=>ed.filter(e=>!(["bonusAdimplencia","bonusCampanha"].includes(e.value)||eZ.some(a=>a.type===e.value))&&("sinal2"!==e.value||!!e1)&&("sinal3"!==e.value||!!e1&&!!e4)),[eZ,e1,e4]),e6=(0,r.useMemo)(()=>(a||[]).filter(e=>"Direcional"===e.brand),[a]),e5=(0,r.useMemo)(()=>a.find(e=>e.id===eG)||null,[a,eG]),e3=(0,r.useMemo)(()=>{if(!(null==e5?void 0:e5.deliveryDate))return null;let e=(0,W.H)(e5.deliveryDate);return(0,q.f)(e)?e:null},[e5]),e8=(0,r.useMemo)(()=>{if(!(null==e5?void 0:e5.constructionStartDate))return null;let e=(0,W.H)(e5.constructionStartDate);return(0,q.f)(e)?e:null},[e5]),e7=(0,r.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,s=Date.now(),{isProcessing:t,lastOperation:l,timestamp:n}=eU.current,r=[["pro-soluto-auto","bonus-adimplencia","minimum-condition"],["bonus-adimplencia","pro-soluto-auto","add-payment-field"]].some(a=>a.includes(e)&&a.includes(l));return!!t&&!!r||(!t||!(s-n<a))&&(eU.current={isProcessing:!0,lastOperation:e,timestamp:s},!0)},[]),e9=(0,r.useCallback)(()=>{eU.current.isProcessing=!1},[]);(0,r.useEffect)(()=>{let e=setInterval(()=>{eU.current.isProcessing&&Date.now()-eU.current.timestamp>5e3&&(eU.current.isProcessing=!1,ev({variant:"destructive",title:"\uD83D\uDD04 Sistema Reiniciado",description:"Foi detectado um loop infinito. O sistema foi reiniciado."}))},1e3);return()=>clearInterval(e)},[ev]),(0,r.useEffect)(()=>{if(!e5||!e3||!e7("bonus-adimplencia-fixo"))return;let e=eZ.some(e=>"financiamento"===e.type),a=e_||0,s=e$||0,t=a>s?a-s:0;try{if(e&&t>0){let e=e3;new Date>e&&(e=(0,z.W)((0,B.P)(new Date,1)));let a={type:"bonusAdimplencia",value:t,date:e},s=eZ.findIndex(e=>"bonusAdimplencia"===e.type);if(s>-1)if(Math.abs(eZ[s].value-t)>1){let e=[...eZ];e[s]=a,setTimeout(()=>{eJ(e),e9()},100)}else e9();else setTimeout(()=>{eW(a),e9()},100)}else{let e=eZ.findIndex(e=>"bonusAdimplencia"===e.type);e>-1?setTimeout(()=>{eL(e),e9()},100):e9()}}catch(e){e9()}},[e_,e$,eZ,e5,e3,eW,eL,eJ,e7,e9]),(0,r.useEffect)(()=>{if(!e_||!e$||0===eZ.length||em(eZ,e_,e$,s,c).businessLogicViolation)return},[e_,e$,eZ,s,c]),(0,r.useEffect)(()=>{if(!e5)return;let e=(0,$.M)(e_),a=eH||0;eX("notaryFees",e>0?e+(a>1?(a-1)*110:0):0,{shouldValidate:!0})},[e_,eH,eX,e5]),(0,r.useEffect)(()=>{eX("notaryInstallments",void 0,{shouldValidate:!0})},[eY,eX]);let ae=(0,r.useCallback)(e=>{var s,n;if(!e)return;eq.reset((0,l._)((0,t._)({},eq.getValues()),{propertyId:e,payments:[],appraisalValue:0,saleValue:0,grossIncome:0,simulationInstallmentValue:0,financingParticipants:1,conditionType:"padrao",installments:void 0,notaryPaymentMethod:"creditCard",notaryInstallments:void 0,selectedUnit:""})),ep(null),eN(!1);let r=a.find(a=>a.id===e);if((null==r||null==(s=r.availability)?void 0:s.towers)&&(null==r||null==(n=r.pricing)?void 0:n.length)){let e=new Map;r.availability.towers.forEach(a=>{a.floors.forEach(s=>{s.units.forEach(t=>{e.set(t.unitId,{status:t.status,floor:s.floor,tower:a.tower})})})}),ew(r.pricing.map(a=>{var s,n,r;let o=e.get(a.unitId),i=String(a.unitNumber);return(0,l._)((0,t._)({},a),{unitNumber:i,status:null!=(s=null==o?void 0:o.status)?s:"Indispon\xedvel",floor:null!=(n=null==o?void 0:o.floor)?n:"N/A",block:null!=(r=null==o?void 0:o.tower)?r:"N/A"})}))}else ew([]),ev({title:"Aviso",description:"Nenhum dado de espelho de vendas encontrado para este empreendimento. Prossiga com a inser\xe7\xe3o manual."})},[eq,a,ev]),aa=(0,r.useCallback)(e=>{e5&&(eX("selectedUnit",e5.enterpriseName.includes("Reserva Parque Clube")?"Torre ".concat(e.block," - Unidade ").concat(e.unitNumber):"Bloco ".concat(e.block," - Unidade ").concat(e.unitNumber),{shouldValidate:!0}),eX("appraisalValue",e.appraisalValue/100,{shouldValidate:!0}),eX("saleValue",e.saleValue/100),eN(!0),ef(!1),ev({title:"âœ… Unidade Selecionada!",description:"Os valores para a unidade ".concat(e.unitNumber," (Torre ").concat(e.block,") foram preenchidos.")}))},[e5,eX,ev]),as=(0,r.useCallback)(()=>{eX("selectedUnit",""),eX("appraisalValue",0,{shouldValidate:!0}),eX("saleValue",0,{shouldValidate:!0}),eN(!1),ev({title:"\uD83E\uDDF9 Sele\xe7\xe3o de unidade limpa",description:"Voc\xea pode agora inserir valores manualmente ou selecionar outra unidade."})},[eX,ev]),at=(0,r.useCallback)((e,a,s,t)=>{if(e<=0||a<=0||!s)return{installments:[0,0,0,0],total:0,periodLengths:[0,0,0,0]};let l=new Date;l.setHours(0,0,0,0);let n=(0,L.w)(s),r=1;t.some(e=>"sinal1"===e.type)&&r++,t.some(e=>"sinal2"===e.type)&&r++,t.some(e=>"sinal3"===e.type)&&r++,s<l&&(r+=(0,O.W)(l,s));let o=e;for(let e=0;e<r;e++){let a=(0,B.P)(l,e);o*=1+((0,L.w)(a)<n?.005:.015)}let i=Math.floor(a/4),c=a%4,d=[i+ +(c>0),i+ +(c>1),i+ +(c>2),i],m=[1,.75,.5,.25],u=0,p=0;for(let e=0;e<4;e++)for(let a=0;a<d[e];a++){p++;let a=1;for(let e=1;e<=p;e++){let s=(0,B.P)(l,e);a/=1+((0,L.w)(s)<n?.005:.015)}u+=m[e]*a}if(0===u)return{installments:[0,0,0,0],total:o,periodLengths:d};let x=o/u,h=m.map(e=>x*e),j=h.reduce((e,a,s)=>e+a*d[s],0);return{installments:h,total:j,periodLengths:d}},[]),al=(0,r.useCallback)((e,a,s)=>e&&a?"creditCard"===s?e/a:.015*e*Math.pow(1.015,a)/(Math.pow(1.015,a)-1):0,[]),an=(0,r.useCallback)((e,a,s)=>{if(e<=0||a<=0||s<=0)return 0;let t=.01;for(let l=0;l<200;l++)try{let l=Math.pow(1+t,e),n=e*Math.pow(1+t,e-1);if(!isFinite(l)||!isFinite(n)){t/=2;continue}let r=s*l-a*(l-1)/t,o=s*n-a*(n*t-(l-1))/(t*t);if(1e-12>Math.abs(o))break;let i=t-r/o;if(1e-10>Math.abs(i-t))return i;t=i}catch(e){break}return t},[]),ar=(0,r.useCallback)(e=>{var a;let t,l,n;if(e0(),!e5||!e3||!e8)return void eQ("propertyId",{message:"Selecione um im\xf3vel para continuar."});let r=em(e.payments,e.appraisalValue,e.saleValue,s,c);if(!r.isValid)return void ev({variant:"destructive",title:"Valores Inconsistentes",description:"A soma dos pagamentos (".concat((0,Q.pF)(100*r.actual),") n\xe3o corresponde ao valor necess\xe1rio (").concat((0,Q.pF)(100*r.expected),").")});if(r.businessLogicViolation)return void ev({variant:"destructive",title:"Regra de Neg\xf3cio Violada",description:r.businessLogicViolation});let o=e.appraisalValue>e.saleValue?e.appraisalValue-e.saleValue:0,i=!!e.payments.find(e=>"proSoluto"===e.type);if(i&&void 0!==e.installments&&e.installments>0){let a;if(a=e5.enterpriseName.includes("Reserva Parque Clube")?"especial"===e.conditionType?66:60:"especial"===e.conditionType?66:52,e.installments>a)return void eQ("installments",{message:"N\xfamero de parcelas excede o limite de ".concat(a," para a condi\xe7\xe3o selecionada.")})}let d=e.payments.reduce((e,a)=>["proSoluto","bonusAdimplencia","bonusCampanha"].includes(a.type)?e:e+(a.value||0),0),m=e.appraisalValue-d-o,u=m=Math.max(0,m),p=null!=(a=e.installments)?a:0;if(u<=0&&i)return void ep({summary:{remaining:0,okTotal:!0},financedAmount:0,steppedInstallments:[0,0,0,0],periodLengths:[0,0,0,0],totalWithInterest:0,totalConstructionInsurance:0,monthlyInsuranceBreakdown:[],incomeCommitmentPercentage:0,proSolutoCommitmentPercentage:0,averageInterestRate:0,notaryInstallmentValue:void 0,incomeError:void 0,proSolutoError:void 0,paymentValidation:r,totalEntryCost:d,totalProSolutoCost:0,totalFinancedCost:0,totalNotaryCost:e.notaryFees||0,totalInsuranceCost:0,totalCost:d+(e.notaryFees||0),effectiveSaleValue:e.saleValue});let x=at(u,p,e3,e.payments),h=((e,a,s)=>{if(!e||!a||!(0,q.f)(e)||!(0,q.f)(a)||e>a||s<=0)return{total:0,breakdown:[]};let t="".concat(e.getTime(),"-").concat(a.getTime(),"-").concat(s),l=eo.get(t);if(l&&Date.now()-l.timestamp<3e5)return{total:l.total,breakdown:l.breakdown};let n=(0,O.W)(a,e);if(n<0)return{total:0,breakdown:[]};let r=0,o=[],i=new Date;for(let a=0;a<=n;a++){let t=(0,B.P)(e,a),l=n>0?a/n:1,c=l*s;t>=i&&(r+=c),o.push({month:(0,U.GP)(t,"MMMM/yyyy",{locale:J.Fo}),value:c,date:t,isPayable:t>=i,progressRate:l})}let c={total:r,breakdown:o,timestamp:Date.now()};return eo.set(t,c),c})(e8,e3,x.installments[0]),j=x.installments[0]/e.grossIncome*100,g=x.installments[0]/e.simulationInstallmentValue*100,v=x.total,b=100*an(p,x.installments[0],u);e.notaryFees&&e.notaryInstallments&&e.notaryPaymentMethod&&(t=al(e.notaryFees,e.notaryInstallments,e.notaryPaymentMethod)),j>30&&(l="Comprometimento de renda (".concat((0,Q.Ee)(j),") excede o limite recomendado de 30%.")),g>100&&(n="Parcela do Pr\xf3-Soluto (".concat((0,Q.Ee)(g),") excede o valor da parcela simulada."));let f=e.notaryFees||0,y=h.total,N=d+v+f+y,C=e.saleValue;ep({summary:{remaining:0,okTotal:!0},financedAmount:u,steppedInstallments:x.installments,periodLengths:x.periodLengths,totalWithInterest:v,totalConstructionInsurance:h.total,monthlyInsuranceBreakdown:h.breakdown,incomeCommitmentPercentage:j,proSolutoCommitmentPercentage:g,averageInterestRate:b,notaryInstallmentValue:t,incomeError:l,proSolutoError:n,paymentValidation:r,totalEntryCost:d,totalProSolutoCost:v,totalFinancedCost:v,totalNotaryCost:f,totalInsuranceCost:y,totalCost:N,effectiveSaleValue:C}),setTimeout(()=>{var e;null==(e=eg.current)||e.scrollIntoView({behavior:"smooth",block:"start"})},100)},[e5,e3,e8,s,c,at,al,an,e0,eQ,ev]),ao=async e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s){if(!(0,K.Gg)(s,5))return void ev({variant:"destructive",title:"Arquivo muito grande",description:"O arquivo deve ter no m\xe1ximo 5MB."});if(!(0,K.dn)(s,["application/pdf"]))return void ev({variant:"destructive",title:"Tipo de arquivo n\xe3o suportado",description:"Apenas arquivos PDF s\xe3o aceitos."});eh(!0);try{let e=(0,et.Uz)(),a=(0,et.Qg)(e,"extractSimulationData"),t=(await a({file:s})).data;t.grossIncome&&eX("grossIncome",t.grossIncome),t.simulationInstallmentValue&&eX("simulationInstallmentValue",t.simulationInstallmentValue),t.appraisalValue&&eX("appraisalValue",t.appraisalValue),ev({title:"Dados extra\xeddos com sucesso!",description:"Os valores foram preenchidos automaticamente."})}catch(e){ev({variant:"destructive",title:"Erro na extra\xe7\xe3o",description:"N\xe3o foi poss\xedvel extrair os dados do documento."})}finally{eh(!1),ej.current&&(ej.current.value="")}}},ai=async()=>{if(!ei||!e5)return void ev({variant:"destructive",title:"Erro ao gerar PDF",description:"Nenhum resultado dispon\xedvel para gerar o PDF."});eR(!0);try{let e=eK(),a={summary:ei.summary,financedAmount:ei.financedAmount,steppedInstallments:ei.steppedInstallments||[0,0,0,0],periodLengths:ei.periodLengths||[0,0,0,0],totalWithInterest:ei.totalWithInterest,totalConstructionInsurance:ei.totalConstructionInsurance,monthlyInsuranceBreakdown:ei.monthlyInsuranceBreakdown||[],incomeCommitmentPercentage:ei.incomeCommitmentPercentage,proSolutoCommitmentPercentage:ei.proSolutoCommitmentPercentage,averageInterestRate:ei.averageInterestRate,notaryInstallmentValue:ei.notaryInstallmentValue,incomeError:ei.incomeError,proSolutoError:ei.proSolutoError},s=(0,l._)((0,t._)({},e),{brokerName:eT,brokerCreci:eB});await (0,es.M)(s,a,e5),ev({title:"PDF gerado com sucesso!",description:"O arquivo foi baixado para o seu dispositivo."})}catch(e){ev({variant:"destructive",title:"Erro ao gerar PDF",description:"N\xe3o foi poss\xedvel gerar o arquivo PDF."})}finally{eR(!1)}},ac=(0,r.useMemo)(()=>ei?[{name:"Entrada",value:ei.totalEntryCost||0,color:"#3b82f6",fill:"#3b82f6"},{name:"Pr\xf3-Soluto",value:ei.totalProSolutoCost||0,color:"#10b981",fill:"#10b981"},{name:"Cart\xf3rio",value:ei.totalNotaryCost||0,color:"#f59e0b",fill:"#f59e0b"},{name:"Seguro",value:ei.totalInsuranceCost||0,color:"#ef4444",fill:"#ef4444"}]:[],[ei]),ad=(0,r.useMemo)(()=>{let e=eC;return"Todos"!==eI&&(e=e.filter(e=>e.status===eI)),"Todos"!==eS&&(e=e.filter(e=>e.floor===eS)),"Todos"!==eA&&(e=e.filter(e=>e.typology===eA)),"Todos"!==ek&&(e=e.filter(e=>e.sunPosition===ek)),e},[eC,eI,eS,eA,ek]),am=(0,r.useMemo)(()=>["Todos",...Array.from(new Set(eC.map(e=>e.floor))).sort((e,a)=>{let s=parseInt(e),t=parseInt(a);return isNaN(s)||isNaN(t)?e.localeCompare(a):t-s})],[eC]),au=(0,r.useMemo)(()=>["Todos",...Array.from(new Set(eC.map(e=>e.typology))).sort()],[eC]),ap=(0,r.useMemo)(()=>["Todos",...Array.from(new Set(eC.map(e=>e.sunPosition))).sort()],[eC]),ax=(0,r.useCallback)(e=>{if(!e7("add-payment-field"))return;let a=new Date,s=a;"sinalAto"===e?s=a:"sinal1"===e?s=(0,D.f)(a,30):"sinal2"===e?s=(0,D.f)(a,60):"sinal3"===e?s=(0,D.f)(a,90):"proSoluto"===e||"fgts"===e?s=e3||(0,B.P)(a,12):"financiamento"===e&&(s=e3||(0,B.P)(a,12)),eW({type:e,value:0,date:s}),e9()},[eW,e3,e7,e9]);return(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30 py-8 px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,n.jsxs)("div",{className:"text-center mb-12",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,n.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,n.jsx)(b.A,{className:"h-8 w-8 text-blue-600"})}),(0,n.jsx)(F.A,{className:"h-8 w-8 text-green-600"}),(0,n.jsx)(S.A,{className:"h-8 w-8 text-purple-600"})]}),(0,n.jsxs)("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:["Calculadora de Financiamento ",(0,n.jsx)("span",{className:"text-blue-600",children:"Escalonado"})]}),(0,n.jsxs)("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto",children:["Simule condi\xe7\xf5es de financiamento com parcelas escalonadas para o seu im\xf3vel.",(0,n.jsx)("span",{className:"font-semibold text-blue-600",children:" Entenda cada etapa do investimento."})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,n.jsxs)(u.Zp,{className:"shadow-lg border-0",children:[(0,n.jsxs)(u.aR,{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-lg",children:[(0,n.jsxs)(u.ZB,{className:"flex items-center gap-2 text-2xl",children:[(0,n.jsx)(v.A,{className:"h-6 w-6"}),"Dados do Empreendimento"]}),(0,n.jsx)(u.BT,{className:"text-blue-100",children:"Selecione o im\xf3vel e a unidade para simula\xe7\xe3o"})]}),(0,n.jsxs)(u.Wu,{className:"p-6 space-y-6",children:[(0,n.jsx)(p.zB,{control:eq.control,name:"propertyId",render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{className:"text-base font-semibold",children:"Empreendimento"}),(0,n.jsxs)(d.l6,{onValueChange:e=>{a.onChange(e),ae(e)},value:a.value,children:[(0,n.jsx)(p.MJ,{children:(0,n.jsx)(d.bq,{className:"h-12 text-base",children:(0,n.jsx)(d.yv,{placeholder:"Selecione um empreendimento"})})}),(0,n.jsx)(d.gC,{children:e6.map(e=>(0,n.jsx)(d.eb,{value:e.id,className:"text-base",children:e.enterpriseName},e.id))})]}),(0,n.jsx)(p.C5,{})]})}}),e5&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-lg text-slate-900",children:e5.enterpriseName}),(0,n.jsxs)("p",{className:"text-slate-600 text-sm",children:[e5.brand," â€¢ ",e5.deliveryDate?(0,U.GP)((0,W.H)(e5.deliveryDate),"dd/MM/yyyy"):"Data n\xe3o definida"]})]}),(0,n.jsxs)("div",{className:"text-right text-sm text-slate-600",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Entrega:"})," ",e3?(0,U.GP)(e3,"dd/MM/yyyy"):"N\xe3o definida"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"In\xedcio das Obras:"})," ",e8?(0,U.GP)(e8,"dd/MM/yyyy"):"N\xe3o definido"]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(m.$,{type:"button",onClick:()=>ef(!0),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",id:"unit-selector-button",children:[(0,n.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Selecionar Unidade"]}),eq.watch("selectedUnit")&&(0,n.jsxs)(m.$,{type:"button",variant:"outline",onClick:as,className:"text-red-600 border-red-200 hover:bg-red-50",children:[(0,n.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Limpar"]})]}),eq.watch("selectedUnit")&&(0,n.jsxs)(G.Fc,{className:"bg-green-50 border-green-200",children:[(0,n.jsx)(f.A,{className:"h-4 w-4 text-green-600"}),(0,n.jsx)(G.XL,{className:"text-green-800",children:"Unidade Selecionada"}),(0,n.jsx)(G.TN,{className:"text-green-700",children:eq.watch("selectedUnit")})]})]})]})]}),(0,n.jsxs)(u.Zp,{className:"shadow-lg border-0",children:[(0,n.jsxs)(u.aR,{className:"bg-gradient-to-r from-green-600 to-green-700 text-white rounded-t-lg",children:[(0,n.jsxs)(u.ZB,{className:"flex items-center gap-2 text-2xl",children:[(0,n.jsx)(y.A,{className:"h-6 w-6"}),"Valores da Opera\xe7\xe3o"]}),(0,n.jsx)(u.BT,{className:"text-green-100",children:"Informe os valores da avalia\xe7\xe3o, venda e renda"})]}),(0,n.jsxs)(u.Wu,{className:"p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsx)(eu,{name:"appraisalValue",label:"Valor de Avalia\xe7\xe3o",control:eq.control,readOnly:!!eq.watch("selectedUnit"),placeholder:"R$ 500.000,00",id:"appraisal-value-input"}),(0,n.jsx)(eu,{name:"saleValue",label:"Valor de Venda",control:eq.control,readOnly:ey,placeholder:"R$ 450.000,00",id:"sale-value-input"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsx)(eu,{name:"grossIncome",label:"Renda Bruta Mensal",control:eq.control,placeholder:"R$ 10.000,00",id:"gross-income-input"}),(0,n.jsx)(eu,{name:"simulationInstallmentValue",label:"Valor da Parcela na Simula\xe7\xe3o",control:eq.control,placeholder:"R$ 2.000,00",id:"simulation-installment-input"})]}),(0,n.jsxs)("div",{className:"border-t pt-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)(h.J,{className:"text-base font-semibold",children:"Extrair dados de documento"}),(0,n.jsxs)(m.$,{type:"button",variant:"outline",onClick:()=>{var e;return null==(e=ej.current)?void 0:e.click()},disabled:ex,className:"gap-2",children:[ex?(0,n.jsx)(P.A,{className:"h-4 w-4 animate-spin"}):(0,n.jsx)(E.A,{className:"h-4 w-4"}),ex?"Extraindo...":"Extrair Dados"]}),(0,n.jsx)("input",{ref:ej,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:ao,className:"hidden"})]}),(0,n.jsx)("p",{className:"text-sm text-slate-500",children:"Fa\xe7a upload de um documento PDF ou imagem para extrair automaticamente os valores de renda bruta, parcela da simula\xe7\xe3o e valor de avalia\xe7\xe3o."})]})]})]}),(0,n.jsxs)(u.Zp,{className:"shadow-lg border-0",children:[(0,n.jsxs)(u.aR,{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-t-lg",children:[(0,n.jsxs)(u.ZB,{className:"flex items-center gap-2 text-2xl",children:[(0,n.jsx)(I.A,{className:"h-6 w-6"}),"Condi\xe7\xf5es de Pagamento"]}),(0,n.jsx)(u.BT,{className:"purple-100",children:"Configure as condi\xe7\xf5es de pagamento e financiamento"})]}),(0,n.jsxs)(u.Wu,{className:"p-6 space-y-6",id:"payment-conditions-section",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsx)(p.zB,{control:eq.control,name:"conditionType",render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Tipo de Condi\xe7\xe3o"}),(0,n.jsxs)(d.l6,{onValueChange:a.onChange,value:a.value,children:[(0,n.jsx)(p.MJ,{children:(0,n.jsx)(d.bq,{children:(0,n.jsx)(d.yv,{placeholder:"Selecione o tipo"})})}),(0,n.jsxs)(d.gC,{children:[(0,n.jsx)(d.eb,{value:"padrao",children:"Padr\xe3o"}),(0,n.jsx)(d.eb,{value:"especial",children:"Especial"})]})]}),(0,n.jsx)(p.C5,{})]})}}),(0,n.jsx)(p.zB,{control:eq.control,name:"financingParticipants",render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Participantes no Financiamento"}),(0,n.jsxs)(d.l6,{onValueChange:e=>a.onChange(parseInt(e)),value:a.value.toString(),children:[(0,n.jsx)(p.MJ,{children:(0,n.jsx)(d.bq,{children:(0,n.jsx)(d.yv,{placeholder:"Selecione"})})}),(0,n.jsxs)(d.gC,{children:[(0,n.jsx)(d.eb,{value:"1",children:"1 Participante"}),(0,n.jsx)(d.eb,{value:"2",children:"2 Participantes"}),(0,n.jsx)(d.eb,{value:"3",children:"3 Participantes"}),(0,n.jsx)(d.eb,{value:"4",children:"4 Participantes"})]})]}),(0,n.jsx)(p.C5,{})]})}})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(h.J,{className:"text-base font-semibold",children:"Formas de Pagamento"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(w.A,{className:"h-4 w-4 text-slate-400"}),(0,n.jsx)("span",{className:"text-sm text-slate-500",children:"Adicione as formas de pagamento na ordem correta"})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[ez.map((e,a)=>{let s="proSoluto"===e.type,t="bonusAdimplencia"===e.type,l="bonusCampanha"===e.type,r="financiamento"===e.type,o=s||t||l||r;return(0,n.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-slate-50 rounded-lg border",children:[(0,n.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsx)(p.zB,{control:eq.control,name:"payments.".concat(a,".type"),render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Tipo"}),(0,n.jsxs)(d.l6,{onValueChange:a.onChange,value:a.value,children:[(0,n.jsx)(p.MJ,{children:(0,n.jsx)(d.bq,{children:(0,n.jsx)(d.yv,{})})}),(0,n.jsx)(d.gC,{children:ed.map(e=>(0,n.jsx)(d.eb,{value:e.value,children:e.label},e.value))})]})]})}}),(0,n.jsx)(p.zB,{control:eq.control,name:"payments.".concat(a,".value"),render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Valor (R$)"}),(0,n.jsx)(p.MJ,{children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(y.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(Y.U,{value:100*a.value,onValueChange:e=>{o||a.onChange(null===e?0:e/100)},className:"pl-10",readOnly:o})]})})]})}}),(0,n.jsx)(p.zB,{control:eq.control,name:"payments.".concat(a,".date"),render:e=>{var s,t;let{field:l}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Data"}),(0,n.jsx)(p.MJ,{children:(0,n.jsx)(H.l,{value:l.value?(0,U.GP)(l.value,"yyyy-MM-dd"):"",onChange:e=>l.onChange(e?new Date(e):new Date),disabled:(e=>{let a=new Date;switch(a.setHours(0,0,0,0),e){case"sinal1":return e=>e<a||e>(0,D.f)(a,30);case"sinal2":return e=>e<a||e>(0,D.f)(a,60);case"sinal3":return e=>e<a||e>(0,D.f)(a,90);case"proSoluto":let s=eZ.find(e=>"sinal1"===e.type),t=(null==s?void 0:s.date)?(0,L.w)((0,B.P)(s.date,1)):(0,L.w)((0,B.P)(a,1));return e=>e<t||![5,10,15,20].includes(e.getDate());default:return e=>e<a}})((null==(s=eZ[a])?void 0:s.type)||"sinalAto")||["bonusAdimplencia","financiamento","bonusCampanha"].includes((null==(t=eZ[a])?void 0:t.type)||"sinalAto")})})]})}})]}),(0,n.jsx)(m.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>eL(a),className:"text-red-600 hover:text-red-700 hover:bg-red-50 mt-8",children:(0,n.jsx)(T.A,{className:"h-5 w-5"})})]},e.id)}),e2.length>0&&(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:e2.map(e=>(0,n.jsxs)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>ax(e.value),className:"gap-2",children:[(0,n.jsx)(V.A,{className:"h-4 w-4"}),e.label]},e.value))})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsx)(p.zB,{control:eq.control,name:"installments",render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"N\xfamero de Parcelas do Pr\xf3-Soluto"}),(0,n.jsx)(p.MJ,{children:(0,n.jsx)(x.p,(0,l._)((0,t._)({type:"number",min:"1",placeholder:"Ex: 60"},a),{onChange:e=>{let s=e.target.value;a.onChange(""===s?void 0:parseInt(s))},id:"installments-input"}))}),(0,n.jsx)(p.C5,{})]})}}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(p.zB,{control:eq.control,name:"notaryPaymentMethod",render:e=>{let{field:a}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Forma de Pagamento do Cart\xf3rio"}),(0,n.jsxs)(d.l6,{onValueChange:a.onChange,value:a.value,children:[(0,n.jsx)(p.MJ,{children:(0,n.jsx)(d.bq,{children:(0,n.jsx)(d.yv,{})})}),(0,n.jsxs)(d.gC,{children:[(0,n.jsx)(d.eb,{value:"creditCard",children:"Cart\xe3o de Cr\xe9dito"}),(0,n.jsx)(d.eb,{value:"bankSlip",children:"Boleto"})]})]}),(0,n.jsx)(p.C5,{})]})}}),eY&&(0,n.jsx)(p.zB,{control:eq.control,name:"notaryInstallments",render:e=>{var a;let{field:s}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Parcelas do Cart\xf3rio"}),(0,n.jsxs)(d.l6,{onValueChange:e=>s.onChange(""===e?void 0:parseInt(e)),value:(null==(a=s.value)?void 0:a.toString())||"",children:[(0,n.jsx)(p.MJ,{children:(0,n.jsx)(d.bq,{children:(0,n.jsx)(d.yv,{placeholder:"Selecione as parcelas"})})}),(0,n.jsx)(d.gC,{children:"creditCard"===eY?Array.from({length:12},(e,a)=>a+1).map(e=>(0,n.jsxs)(d.eb,{value:e.toString(),children:[e,"x ",e>1?"parcelas":"parcela"]},e)):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.eb,{value:"36",children:"36 parcelas"}),(0,n.jsx)(d.eb,{value:"40",children:"40 parcelas"})]})})]}),(0,n.jsx)(p.C5,{})]})}})]})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)(m.$,{type:"button",onClick:()=>eq.handleSubmit(ar)(),size:"lg",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white shadow-lg",id:"calculate-button",children:[(0,n.jsx)(b.A,{className:"h-5 w-5 mr-2"}),"Calcular Financiamento"]}),(0,n.jsxs)(m.$,{type:"button",variant:"outline",onClick:()=>eq.reset(),size:"lg",className:"border-slate-300 text-slate-700 hover:bg-slate-50",children:[(0,n.jsx)(A.A,{className:"h-5 w-5 mr-2"}),"Limpar Tudo"]})]})]}),(0,n.jsxs)("div",{className:"space-y-8",children:[ei&&(0,n.jsxs)("div",{ref:eg,children:[(0,n.jsxs)(u.Zp,{className:"shadow-xl border-0 bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:[(0,n.jsxs)(u.aR,{className:"pb-4",children:[(0,n.jsxs)(u.ZB,{className:"flex items-center gap-2 text-2xl",children:[(0,n.jsx)(k.A,{className:"h-6 w-6 text-yellow-400"}),"Resultado da Simula\xe7\xe3o"]}),(0,n.jsx)(u.BT,{className:"text-slate-300",children:"Detalhes do financiamento escalonado"})]}),(0,n.jsxs)(u.Wu,{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 text-center",children:[(0,n.jsx)("p",{className:"text-sm text-slate-300 mb-1",children:"Valor Financiado"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-green-400",children:(0,Q.pF)(100*ei.financedAmount)})]}),(0,n.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 text-center",children:[(0,n.jsx)("p",{className:"text-sm text-slate-300 mb-1",children:"Total com Juros"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:(0,Q.pF)(100*ei.totalWithInterest)})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("h4",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,n.jsx)(F.A,{className:"h-5 w-5"}),"Parcelas Escalonadas"]}),ei.steppedInstallments&&ei.steppedInstallments.map((e,a)=>{var s;return(0,n.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsxs)("span",{className:"text-slate-300",children:["Fase ",a+1,": ",(null==(s=ei.periodLengths)?void 0:s[a])||0," parcelas"]}),(0,n.jsx)("span",{className:"text-lg font-semibold text-white",children:(0,Q.pF)(100*e)})]}),(0,n.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(e/Math.max(...ei.steppedInstallments||[1])*100,"%")}})})]},a)})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-slate-400",children:"Taxa M\xe9dia"}),(0,n.jsx)("p",{className:"font-semibold text-green-400",children:(0,Q.Ee)(ei.averageInterestRate)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-slate-400",children:"Comprometimento Renda"}),(0,n.jsx)("p",{className:(0,el.cn)("font-semibold",ei.incomeError?"text-red-400":"text-yellow-400"),children:(0,Q.Ee)(ei.incomeCommitmentPercentage)})]})]}),ei.notaryInstallmentValue&&(0,n.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,n.jsx)("p",{className:"text-sm text-slate-300 mb-1",children:"Parcela do Cart\xf3rio"}),(0,n.jsx)("p",{className:"text-xl font-bold text-purple-400",children:(0,Q.pF)(100*ei.notaryInstallmentValue)})]}),ei.totalConstructionInsurance>0&&(0,n.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,n.jsx)("p",{className:"text-sm text-slate-300 mb-1",children:"Seguro de Obras"}),(0,n.jsx)("p",{className:"text-xl font-bold text-orange-400",children:(0,Q.pF)(100*ei.totalConstructionInsurance)})]}),(0,n.jsx)(j.w,{className:"bg-slate-700"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center text-lg",children:[(0,n.jsx)("span",{className:"text-slate-300",children:"Custo Total"}),(0,n.jsx)("span",{className:"font-bold text-white text-xl",children:(0,Q.pF)(100*(ei.totalCost||0))})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,n.jsx)("span",{className:"text-slate-400",children:"Valor Efetivo de Venda"}),(0,n.jsx)("span",{className:"font-semibold text-green-400",children:(0,Q.pF)(100*(ei.effectiveSaleValue||0))})]})]})]})]}),(0,n.jsxs)(u.Zp,{className:"shadow-lg border-0 mt-6",children:[(0,n.jsx)(u.aR,{children:(0,n.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(S.A,{className:"h-5 w-5"}),"Distribui\xe7\xe3o de Custos"]})}),(0,n.jsxs)(u.Wu,{children:[(0,n.jsx)(X.m,{data:ac,value:ei.totalCost||0}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6 text-sm",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-slate-600",children:"Entrada:"}),(0,n.jsx)("span",{className:"font-semibold",children:(0,Q.pF)(100*(ei.totalEntryCost||0))})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-slate-600",children:"Pr\xf3-Soluto:"}),(0,n.jsx)("span",{className:"font-semibold",children:(0,Q.pF)(100*(ei.totalProSolutoCost||0))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-slate-600",children:"Cart\xf3rio:"}),(0,n.jsx)("span",{className:"font-semibold",children:(0,Q.pF)(100*(ei.totalNotaryCost||0))})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-slate-600",children:"Seguro:"}),(0,n.jsx)("span",{className:"font-semibold",children:(0,Q.pF)(100*(ei.totalInsuranceCost||0))})]})]})]})]})]}),ei.monthlyInsuranceBreakdown&&ei.monthlyInsuranceBreakdown.length>0&&(0,n.jsxs)(u.Zp,{className:"shadow-lg border-0 mt-6",children:[(0,n.jsx)(u.aR,{children:(0,n.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(M.A,{className:"h-5 w-5"}),"Cronograma do Seguro de Obras"]})}),(0,n.jsx)(u.Wu,{children:(0,n.jsx)("div",{className:"max-h-64 overflow-y-auto",children:(0,n.jsxs)(Z.XI,{children:[(0,n.jsx)(Z.A0,{children:(0,n.jsxs)(Z.Hj,{children:[(0,n.jsx)(Z.nd,{children:"M\xeas"}),(0,n.jsx)(Z.nd,{children:"Valor"}),(0,n.jsx)(Z.nd,{children:"Status"})]})}),(0,n.jsx)(Z.BF,{children:ei.monthlyInsuranceBreakdown.map((e,a)=>(0,n.jsxs)(Z.Hj,{children:[(0,n.jsx)(Z.nA,{className:"font-medium",children:e.month}),(0,n.jsx)(Z.nA,{children:(0,Q.pF)(100*e.value)}),(0,n.jsx)(Z.nA,{children:(0,n.jsx)("span",{className:(0,el.cn)("px-2 py-1 rounded-full text-xs font-medium",e.isPayable?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"),children:e.isPayable?"A Pagar":"Pago"})})]},a))})]})})})]}),(0,n.jsxs)(u.Zp,{className:"shadow-lg border-0 mt-6",children:[(0,n.jsx)(u.aR,{children:(0,n.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(C.A,{className:"h-5 w-5"}),"Gerar Relat\xf3rio"]})}),(0,n.jsxs)(u.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h.J,{htmlFor:"broker-name",children:"Nome do Corretor"}),(0,n.jsx)(x.p,{id:"broker-name",value:eT,onChange:e=>eD(e.target.value),placeholder:"Seu nome completo"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(h.J,{htmlFor:"broker-creci",children:"CRECI"}),(0,n.jsx)(x.p,{id:"broker-creci",value:eB,onChange:e=>eO(e.target.value),placeholder:"N\xfamero do CRECI"})]})]}),(0,n.jsx)(m.$,{onClick:ai,disabled:eE||!eT||!eB,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:eE?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.A,{className:"h-4 w-4 animate-spin mr-2"}),"Gerando PDF..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Baixar Relat\xf3rio PDF"]})}),(!eT||!eB)&&(0,n.jsx)("p",{className:"text-sm text-amber-600 text-center",children:"Preencha nome e CRECI para gerar o relat\xf3rio"})]})]})]}),!ei&&(0,n.jsx)(u.Zp,{className:"shadow-lg border-0 bg-gradient-to-br from-slate-50 to-blue-50/50",children:(0,n.jsxs)(u.Wu,{className:"p-8 text-center",children:[(0,n.jsx)(b.A,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Simula\xe7\xe3o de Financiamento"}),(0,n.jsx)("p",{className:"text-slate-500 text-sm",children:"Preencha os dados do empreendimento e configure as condi\xe7\xf5es de pagamento para ver a simula\xe7\xe3o completa com parcelas escalonadas."})]})})]})]})]}),(0,n.jsx)(g.lG,{open:eb,onOpenChange:ef,children:(0,n.jsxs)(g.Cf,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,n.jsxs)(g.c7,{children:[(0,n.jsxs)(g.L3,{className:"flex items-center gap-2",children:[(0,n.jsx)(R.A,{className:"h-5 w-5"}),"Seletor de Unidades - ",null==e5?void 0:e5.enterpriseName]}),(0,n.jsx)(g.rr,{children:"Selecione uma unidade para preencher automaticamente os valores de avalia\xe7\xe3o e venda."})]}),e5&&(0,n.jsx)(en,{allUnits:eC,filteredUnits:ad,isReservaParque:e5.enterpriseName.includes("Reserva Parque Clube"),onUnitSelect:aa,filters:{status:eI,setStatus:eP,floor:eS,setFloor:eV,typology:eA,setTypology:eM,sunPosition:ek,setSunPosition:eF},filterOptions:{floors:am,typologies:au,sunPositions:ap}})]})}),(0,n.jsx)(o.Op,(0,l._)((0,t._)({},eq),{children:(0,n.jsx)(er,{isOpen:ee,onClose:()=>ea(!1),form:eq,results:ei?{summary:ei.summary,financedAmount:ei.financedAmount,steppedInstallments:ei.steppedInstallments||[0,0,0,0],periodLengths:ei.periodLengths||[0,0,0,0],totalWithInterest:ei.totalWithInterest,totalConstructionInsurance:ei.totalConstructionInsurance,monthlyInsuranceBreakdown:ei.monthlyInsuranceBreakdown||[],incomeCommitmentPercentage:ei.incomeCommitmentPercentage,proSolutoCommitmentPercentage:ei.proSolutoCommitmentPercentage,averageInterestRate:ei.averageInterestRate,notaryInstallmentValue:ei.notaryInstallmentValue,incomeError:ei.incomeError,proSolutoError:ei.proSolutoError}:null})}))]})}eu.displayName="CurrencyFormField"}}]);